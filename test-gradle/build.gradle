defaultTasks 'hello','world'


task world <<{
	println "world hello!"
}

task hello{
	doLast{	
		println 'Hello World!';
	}
}

task shortCutHello <<{
	println'Hello world!';
}

task upper <<{
	String str = 'mY_nAme'
	println 'Original:' + str
	println 'Upper case:' + str.toUpperCase()
}

task count <<{
	5.times{print "$it"}
}

task intro(dependsOn: hello) <<{
	println "I'm figer!"
}

task taskDepend(dependsOn : 'definedLater') <<{
	println 'taskDepend'
}

task definedLater <<{
	println 'definedLater'
}

4.times{ counter->
	task "task$counter" <<{
		println "I'm number $counter."
	}

}

task0.dependsOn task2, task3

shortCutHello << {
        println 'add something before.'
}


shortCutHello.doFirst{
	println 'task behaviour,do first'
}

shortCutHello << {
        println 'add something middle.'
}


shortCutHello.doLast{
	println 'task behaviour,do last'
}

shortCutHello << {
        println 'add something after.'
}

shortCutHello << {
	println "Greeting from the $shortCutHello.name task."
}

task myTask{
	ext.myName = 'figer'
}

shortCutHello <<{
	println "myname:" + myTask.myName
}



task loadFile <<{
	fileList("resources").each{File file ->
		println "load file: $file.name"
	}
}

File[] fileList(String dir){
	file(dir).listFiles({file->file.isFile()} as FileFilter).sort()
}



task distribution <<{
	println "We build the zip with version $version"
}

task release(dependsOn: 'distribution') <<{
	println "We release now!"
}

gradle.taskGraph.whenReady {taskGraph ->
	if(taskGraph.hasTask(release)){
		version = '1.0'
	}else{
		version = '1.0-SNAPSHOT'
	}
	
}
